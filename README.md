# Whisper transcript formatting, diarization and addition of timestamps 
## Overview
This is the workflow for taking oral history transcript files generated by OpenAI's Whisper tool and formatting them for use. The original script was developed to take the JSON output from Whisper and format according to the specificiations of UGA Special Collections Libraries' Oral History program, following the parameters of a style guide but also in anticipation of ingesting authenticated transcripts into OHMS/Aviary. By parsing the JSON, vtt, or srt file (defaulting to JSON), the script breaks the text into dialogue form, inserting hard returns between speaking parts and inserting SPEAKER segments than can be replaced with speaker names via Find and Replace. The formatting script currently points to a directory of files. 
## Script Arguments
Script usage: python [script] [directory of transcript files]
ex: python russell-transcript.py \path\to\my\directory
## Installation
1. Download the repository or, since there are no depedencies, just the script you intend to run
2. If applicable, set up a directory to run the script from
3. Set up a directory of transcript files for the formatting script to work with (as a default the formatting script creates a new txt file that goes in this directory)
4. Run the script as python [script] [directory of transcript files]
## Workflow (how the JSON version of the script works)
The JSON file stores information on a few different levels, but importantly stores information about every word in the transcript. When diarization is selected, the word SPEAKER appears at every detected change of speaker. Between this SPEAKER convention and the storing of time-based information at the word level, the diarization and creating of timestamps is possible. 

Timestamps can be useful both as a reference point when accessing the transcript directly, and as a means of synchronizing the transcript in OHMS/Aviary.Previously, timestamps had been requested at regular intervals, such as every thirty seconds or every minute. The current script inserts a timestamp at every speaker change. 

The formatting script iterates through every word and writes to a txt file word by word. When the iteration hits the word SPEAKER (usually SPEAKER_00 or SPEAKER_01) and the currently stored speaker variable is different, the line break, insertion of speaker, and insertion of timestamp take place.
## Author
Chris Lott - Digital Asset Coordinator, University of Georgia Special Collections Libraries
